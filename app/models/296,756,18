296,756,18

def max(a,b)
  a>b ? a : b
end

def min(a,b)
  a<b ? a : b
end

def generate_popularity_ranking users_count, checkins_count, tip_count
  popularity = 0
  # does the caffe has a lot of returning customers?
  popularity = 
  if users_count > 30
    ratio = min(checkins_count,users_count)/max(checkins_count,users_count).to_f
    100*(1-ratio)
  else
    10
  end

  popularity += popularity<10.0 ? 10.0 : 0.0

  # is the ratio tips / checkins greater than 0.23?
  #  if so let's take those into account
  if tip_count/checkins_count.to_f > 0.23
    popularity += (tip_count/users_count.to_f)*10
  end
  
  popularity = popularity > 100 ? 100 : popularity.to_i
end

generate_popularity_ranking 296,756,18